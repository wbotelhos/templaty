<%- fields = Templaty::Helper.fields(options) -%>
# frozen_string_literal: true
<%-
  fields << 'more_image'
  fields << 'edit_path'
  fields << 'show_path' if options[:show_route]
-%>

json.list do
  json.array! @items do |<%= options[:table].singularize %>|
    <%- fields.sort.each do |field| -%>
    <%- if field == 'edit_path' -%>
    json.edit_path edit_<%= options[:namespace] %>_<%= options[:table].singularize %>_path(<%= options[:table].singularize %>)
    <%- elsif field == 'more_image' -%>
    json.more_image image_path('icons/ellipsis.svg')
    <%- elsif field == 'show_path' -%>
    json.show_path <%= options[:table].singularize %>_path(<%= options[:table].singularize %>)
    <%- elsif field.start_with?('percentage') -%>
    json.<%= field.sub('_cents', '') %> Helper.percentage(<%= options[:table].singularize %>.<%= field %>)
    <%- elsif field.end_with?('_cents') -%>
    json.<%= field.sub('_cents', '') %> Helper.money(<%= options[:table].singularize %>.<%= field %>, type: :cents)
    <%- else -%>
    json.<%= field %> <%= options[:table].singularize %>.<%= field %>
    <%- end -%>
    <%- end -%>
  end
end

json.total @total
